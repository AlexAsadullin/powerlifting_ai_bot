# Powerlifting AI Bot - проект Александра Асадуллина для конкурса грантов ТИДИ 
Телеграм-бот для автоматизации управления тренировками, питанием и прогрессом подростков, занимающихся пауэрлифтингом.

## Quick Start
1. **Клонируйте репозиторий**:
   ```bash
   git clone https://github.com/AlexAsadullin/powerlifting_ai_bot.git
   cd powerlifting_ai_bot
2. **Скачайте зависимости**:
   ```bash
   pip install -r requirements.txt
3. **Создайте .env** и внесите туда токен из botfather и huggingface по образцу (.env_example)
4. **Запустите бот** - вся настаройка произойдет под капотом:
   ```bash
   python.exe main.py
Первый запуск займет время, т.к. нужно скачать ИИ-модель с HuggingFace (выключить VPN)

## Презентация и видео с демонстрацией лежат в облаке
https://drive.google.com/drive/folders/1kOt8R9Aa-5DvWxK-uPWTVB5uYn4LJsmR?usp=sharing
---

## 1. Проблемы и целевая аудитория

### Проблемы
1. Тренер коммуницирует с каждым учеником по отдельности через личные сообщения - много рутины и копипаста, т.к. ученики приходят и уходят 
2. Новички часто забывают то, что говорил тренер из-за объемности материала и стресса от попадания в новую обстановку - приходится повторять одни и те же простые истины по несколько раз
3. И тренеру, и ученикам лень заносить еду и историю тренировок в трекер (много полей для заполнения) - частые ошибки, когда забыли или неправильно внесли прием пищи/тренировку
4. Расписание у тренера в заметках или на бумажке - его тяжело изменить, т.к. придется каждого предупредить об этом в личных сообщениях
5. Ученик сам должен запомнить расписание или переспросить у тренера в ЛС
6. Тренер на связи не 24/7 и может ответить на вопрос ученика не сразу
7. Ручной учет оплат за занятие (нужно отправить скриншот оплвты тренеру в ЛС и самому отслеживать, когда нужно сделать следующую выплату)

### Целевая аудитория
- **Подростки**, занимающиеся пауэрлифтингом, которые хотят отслеживать свои тренировки, питание и прогресс.
- **Тренеры по пауэрлифтингу**, работающие с подростками, которым нужен инструмент для управления группами, расписанием, программами тренировок, .

---

## 2. Идея и сценарии работы бота

### Идея
Бот - единая площадка для тренеров и учеников, в которой они найдут все инструмены для мониторинга прогресса, питания, управления расписанием и программой тренировок - все, что нужно для эффективной работы в тренажерном зале

Телеграм бот поможет:
 **Тренеру:**
 - Создавать рассылки по группам учеников
 - Легко менять состав, расписание и программу тренировок группы (после каждого изменения отправлено автоматическое предупреждение)
 - Объединять разрозненные материалы в структурированную базу знаний
 - Мониторить оплату и остаток оплаченных тренировок у каждого ученика

 **Ученику:**
 - Иметь доступ к материалам базы знаний в соответствии со своим уровнем (новичок, продвинутый или спортсмен)
 - Отслеживать свой график тренировок
 - Скачивать свою программу тренировок
 - Загружать в базу заметки о своем питании и тренировке в произвольном порядке (происходит ии-обработка)
 - Отслеживать свой прогресс (веса в упражнениях, мышечная масса, фотоотчеты)
 - Получать автоматические уведомления об оплате и хранить историю платежей в одном удобном месте

### Сценарии работы бота

#### Для тренера
- **Просмотр профилей**: получить список с имениами и username'ами всех своих учеников
- **Управление группами учеников**: Создание групп, добавление/удаление участников, редактирование расписания и программы тренировок, прикрепленных к группе.
- **Управление базой знаний**: Добавление и удаление материалов с ценной информацией по питанию, тренировкам разного уровня сложности и добавкам.
- **Одобрение или отклонение запросов на оплату**: Проверка платежей учеников и обновление количества доступных занятий.

#### Для ученика
- **Просмотр расписания тренировок**: Доступ к актуальному графику занятий и автоматические уведомления об изменениях.
- **Получение программы тренировок**: Загрузка тренировочных планов в виде файлов.
- **Отправка информации о питании**: Ввод данных о питании в свободном формате (текст, фото, файлы).
- **Отправка информации о тренировках**: Ввод данных о тренировках в свободном формате (текст, фото, файлы).
- **Отслеживание прогресса**: Загрузка данных о тренировках и фото, просмотр истории, анализ с помощью ИИ.
- **Доступ к базе знаний**: Изучение материалов, загруженных тренером (текст, файлы, изображения).

---

## 3. Архитектура и структура проекта

### Архитектура
- **Фронтенд**: Телеграм-бот, реализованный с использованием библиотеки `aiogram`.
- **Бэкенд**: Python с использованием ORM `SQLAlchemy` для работы с базой данных.
- **База данных**: SQLite (с возможностью замены на другую СУБД через конфигурацию).
- **ИИ-модель**: Предобученная модель `Llama-3.2-1B-Instruct-FitnessAssistant` для анализа прогресса и генерации рекомендаций.

### Структура проекта
- **`handlers/`**: Обработчики команд и callback-запросов для бота.
  - `admin.py`: Функции для тренеров (управление группами, расписаниями, базой знаний).
  - `start.py`: Основные функции для учеников (регистрация, просмотр данных, взаимодействие с ИИ).
- **`models.py`**: Определение моделей базы данных (Student, Trainer, Group и др.).
- **`database.py`**: Инициализация и управление базой данных.
- **`ai_model.py`**: Логика работы с ИИ-моделью, включая генерацию ответов.
- **`filters.py`**: Пользовательские фильтры для `aiogram` (например, проверка прав администратора).
- **`main.py`**: Точка входа, инициализация и запуск бота.

---

## 4. Используемые технологии и ИИ-инструменты

### Технологии
- **Python**: Основной язык программирования.
- **aiogram**: Асинхронный фреймворк для создания телеграм-ботов.
- **SQLAlchemy**: ORM для взаимодействия с БД.
- **transformers**: Взаимодействие с опенсорсными ИИ-моделями с hugging face (в будущем планируется замена на deepseek api для расширения возможностей чтения большой базы знаний).
- **torch**: Фреймворк для машинного обучения.
- **PyPDF2**: Извлечение текста из PDF-файлов.

### ИИ-инструменты
На проекте работает **Llama-3.2-1B-Instruct-FitnessAssistant**: Легковесная модель (1B параметров), оптимизированная для задач фитнеса и пауэрлифтинга. Используется для анализа тренировок, питания и генерации рекомендаций (в будущем планируется замена на deepseek api для расширения возможностей чтения большой базы знаний).

Вручную реализовано:
 - Идея проекта и ее описание
 - Проработка пользовательских сценариев
 - Архитектура проекта, стек технологий
 - Работа с БД
 - Рефакторинг кода, написанного нейронками
 - Поиск подходящей ии-модели для фитнесса
 - Тестирование функционала бота
 - Демонстрация

Реализовано с ИИ:
 - Интерфейс телеграм-бота (admin.py, start.py)
